Router.configure({
    layoutTemplate: 'layout',
    notFoundTemplate: 'notFound'
});

Router.route('/', function () {
    this.render('landingPageTemplate');
    }, {
        name: 'landingRoute'
    });
Router.route('/regapplicant', function () {
    this.render('NewApplicantTemplate');
    }, {
        name: 'Insertinapplicant',
      waitOn: function(){
        	return Meteor.subscribe("Insertinapplicant");
	}
        
    });
Router.route('/regemployer', function () {
    this.render('NewEmployerTemplate');
    }, {
        name: 'Insertinemployer',
      waitOn: function(){
        	return Meteor.subscribe("Insertinemployer");
	}
        
    });
Router.route('/addapplicantaccount/:appli',function(){
        this.render("addApplicantAccountTemplate",{data: {applicantId: this.params.appli}});
    },
    {
        name: "addApplicantAccountRoute",
        waitOn: function(){
     
                return Meteor.subscribe("addApplicantDetails", this.params.appli);
        }
    }
    );
Router.route('/loginapplicant',function () {
    this.render('applicantLoginTemplate');
    }, {
        name: 'applicantLoginRoute',
        onBeforeAction: function(){
            if (Meteor.user()) {
                // User logged in... Move into landing...
                this.redirect('applicantLandingRoute');
                this.stop();
            }
            else {
                this.next();
            }
        }
});
Router.route('/applicant/landing',function(){
    this.render('applicantLandingTemplate');
    },
    {
        name: 'applicantLandingRoute',
        waitOn : function(){
            if (Meteor.user() && Roles.userIsInRole(Meteor.user(), ['applicant']) ){
                return Meteor.subscribe('applicantListing');
            }
        }
    });
Router.route('/applicant/profile', function () {
    this.render('applicantProfileTemplate');
    }, {
        name: 'applicantprofile',
       waitOn: function(){
		return Meteor.subscribe("applicantprofile");
	}
    });
Router.route('/error',function(){
        this.render('somethingWentWrongTemplate');
    },
    {
        name: 'somethingWentWrongRoute'
    }
);







